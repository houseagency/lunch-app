webpackJsonp([1],{"/DF0":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("U7vG"),i=n.n(s),c=n("3zLD"),l=(n.n(c),n("pAMG")),u=(n.n(l),n("INDk")),p=(n.n(u),n("KluA")),m=n("0SSo"),h=function(e,t){return e.raw=t,e}(["\nquery {\n\tallCategorieses {\n\t\tid\n        catName\n        iconImg {\n            url\n        }\n\t}\n}\n"],["\nquery {\n\tallCategorieses {\n\t\tid\n        catName\n        iconImg {\n            url\n        }\n\t}\n}\n"]),f=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.choosenCat,n=e.data,a=this.props.getCurrentPos,r=n.allCategorieses;return!!r&&i.a.createElement("div",{className:"btn-container"},i.a.createElement(m.a,{onClick:a}),r.map(function(e,n){return i.a.createElement(p.a,{key:n,btnTxt:e.catName,onClick:function(){return t(e.id)},catBtn:"cat-btn",btnIcon:e.iconImg.url})}))},t}(s.Component);t.a=Object(c.graphql)(Object(c.gql)(h))(f)},0:function(e,t,n){n("+prg"),e.exports=n("lVK7")},"0SSo":function(e,t,n){"use strict";var a=n("U7vG"),r=n.n(a),o=r.a.createElement("span",{className:"slider"}),s=r.a.createElement("h4",null,"Filter on nearby restaurants (within 500 m)"),i=function(e){return r.a.createElement("div",{className:"toggle-container"},r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onClick:function(t){e.onClick(t)}}),o),s)};t.a=i},"1K4x":function(e,t,n){"use strict";var a=n("U7vG"),r=n.n(a),o=r.a.createElement("footer",null),s=function(e){return o};t.a=s},"2Fet":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("U7vG"),i=n.n(s),c=n("jdcc"),l=i.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),u=i.a.createElement("div",{className:"section-divider"},i.a.createElement("div",{className:"header-container"},i.a.createElement("h3",null,"DETAILS"))),p=i.a.createElement("div",{className:"section-divider"},i.a.createElement("div",{className:"header-container"},i.a.createElement("h3",null,"LOCATION"))),m=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.selectedRestaurant,n=this.props.currentPos,a=t.rating;return console.log(a),i.a.createElement("div",{className:"info-container"},i.a.createElement("img",{className:"rest-img",src:t.restImage.url}),i.a.createElement("div",{className:"info"},i.a.createElement("h1",null,t.name),i.a.createElement("div",{className:"address-container"},l,i.a.createElement("p",null," ",t.address)),i.a.createElement("p",null,"Cuisine: ",t.cuisine," "),i.a.createElement("p",null,"Price range: ",t.priceRange),i.a.createElement("p",null,"Rating: ",t.rating)),u,i.a.createElement("div",{className:"info"},i.a.createElement("p",{className:"details"}," ",t.desc," "),i.a.createElement("a",{target:"_blank",href:t.menuLink},"To the lunch menu")),p,i.a.createElement(c.a,{position:t.position,currentPos:n,name:t.name,zoom:13,containerElement:i.a.createElement("div",{style:{height:300,width:"100%",marginTop:20}}),mapElement:i.a.createElement("div",{style:{height:"100%"}})}),i.a.createElement("a",{href:"#",ref:"link",onClick:function(){return e.props.backToStart()}},"BACK TO START"))},t}(s.Component);t.a=m},INDk:function(e,t){e.exports=[{name:"Formal Lunch",id:"1",imgIcon:"img/icon_formal.svg"},{name:"Work Lunch",id:"2",imgIcon:"img/icon_work.svg"}]},KluA:function(e,t,n){"use strict";var a=n("U7vG"),r=n.n(a),o=function(e){return r.a.createElement("button",{className:e.catBtn,onClick:e.onClick},r.a.createElement("img",{className:"btn-icon",src:e.btnIcon}),r.a.createElement("span",null,e.btnTxt))};t.a=o},LGxg:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("U7vG"),i=n.n(s),c=(n("KluA"),n("+caA")),l=(n.n(c),n("3zLD")),u=(n.n(l),function(e){function t(n){a(this,t);var o=r(this,e.call(this,n));return o.slotHeight=99,o.fetchLink=function(){o.isSpinning=!1,document.querySelector(".info-link").style.display="block"},o.spin=o.spin.bind(o),o.moveSpinnerOneStep=o.moveSpinnerOneStep.bind(o),o.stopSpinner=o.stopSpinner.bind(o),o.fetchLink=o.fetchLink.bind(o),o.isSpinning=!1,o}return o(t,e),t.prototype.spin=function(){this.isSpinning=!0;var e=this.props.restaurantList,t=Math.floor(Math.random()*e.length);this.selectedRestaurant=e[t],this.moveSpinnerOneStep(1,0===t?e.length:t,6),console.log("Randomizer.spin",t)},t.prototype.moveSpinnerOneStep=function(e,t,n){var a=this;c.TweenMax.killTweensOf(this.refs.slots),e===this.props.restaurantList.length+1&&(e=1,c.TweenMax.set(this.refs.slots,{y:0}),n--),n<=0&&e===t?this.stopSpinner(e):this.refs.slots&&c.TweenMax.to(this.refs.slots,.1,{y:-e*this.slotHeight,ease:Linear.easeNone,onComplete:function(){a.moveSpinnerOneStep(e+1,t,n)}})},t.prototype.stopSpinner=function(e){var t=this;this.props.onRestaurantSelected(this.selectedRestaurant),c.TweenMax.to(this.refs.slots,2.5,{y:-e*this.slotHeight,ease:Bounce.easeOut,onComplete:function(){t.fetchLink()}})},t.prototype.componentWillReceiveProps=function(e){e.restaurantList!==this.props.restaurantList&&(console.log("isspinning",this.isSpinning),this.spin())},t.prototype.componentDidMount=function(){this.props.isLocationBased||this.spin()},t.prototype.componentWillUnmount=function(){c.TweenMax.killTweensOf(this.refs.slots)},t.prototype.render=function(){var e=this,t=this.props,n=t.restaurantList,a=(t.data,t.currentPos),r=t.isLocationBased;console.log("restList",n);var o=[].concat(n,[n[0]]).map(function(e,t){return i.a.createElement("div",{key:t,className:"restaurant-container"},i.a.createElement("p",{className:"spinner-txt"},e.name))});return i.a.createElement("div",{className:"randomizer-container"},i.a.createElement("div",{className:"slot-machine",style:{opacity:r&&!a?0:1}},i.a.createElement("div",{ref:"slots",className:"slot-container"},o)),i.a.createElement("a",{className:"info-link",href:"#",ref:"link",onClick:function(){return e.props.showInfo()}},"MORE INFO"),i.a.createElement("a",{href:"#",ref:"link",onClick:function(){return e.props.backToStart()}},"BACK TO START"))},t}(s.Component));t.a=u},VH3W:function(e,t,n){"use strict";var a=n("U7vG"),r=n.n(a),o=(n("CIox"),n("F8kA"),n("/DF0"),n("LGxg"),n("2Fet"),r.a.createElement("header",null,r.a.createElement("div",{className:"logo-container"}))),s=function(e){return o};t.a=s},aLQP:function(e,t,n){e.exports=n.p+"MarkerIcon.756a8c50.svg"},cilB:function(e,t){},jdcc:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("U7vG"),i=n.n(s),c=n("BL0p"),l=(n.n(c),n("aLQP")),u=n.n(l),p=function(e){function t(){a(this,t);var n=r(this,e.call(this));return n.state={map:null,markers:[]},n}return o(t,e),t.prototype.mapLoaded=function(e){null==this.state.map&&this.setState({map:e})},t.prototype.render=function(){return i.a.createElement(c.GoogleMap,{ref:this.mapLoaded.bind(this),defaultZoom:this.props.zoom,defaultCenter:this.props.position},i.a.createElement(c.Marker,{name:"you are here",position:this.props.currentPos}),i.a.createElement(c.Marker,{className:"marker",name:this.props.name,position:this.props.position,icon:{url:u.a,scaledSize:new google.maps.Size(50,70)}}))},t}(s.Component);t.a=Object(c.withGoogleMap)(p)},lVK7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("U7vG"),r=n.n(a),o=n("O27J"),s=(n.n(o),n("3zLD")),i=(n.n(s),n("pnOm")),c=new s.ApolloClient({networkInterface:Object(s.createNetworkInterface)({uri:"https://api.graphcms.com/simple/v1/lunchapp"})});Object(o.render)(r.a.createElement(s.ApolloProvider,{client:c},r.a.createElement(i.a,null)),document.getElementById("app"))},pAMG:function(e,t){e.exports=[{restId:"1",name:"Restaurang Tranan",menu_link:"http://www.tranan.se/restaurangen/meny/",cuisine:["European","Swedish"],price_range:"$$-$$$",rating:"****",phone:"08-52728100",address:"Karlbergsvägen 14",cat_id:"1",img_url:"img/tranan.jpg",desc:"A place to meet at, have a bite to eat and something to drink. That was how Tranan was know in 1929 by the residents of Stockholm, and that’s how it’s still known today - over 80 years later.",position:{lat:59.343172,lng:18.049017}},{restId:"2",name:"Miss Clara",menu_link:"http://www.missclarahotel.com/restaurang/lunch-meny",cuisine:["International","Swedish"],price_range:"$$$",rating:"****",phone:"08-4406710",address:"Sveavägen 48",cat_id:"1",img_url:"img/fish_miss_clara.jpg",desc:"The kitchen’s philosophy is to work in as natural way as possible. They change our meat, fish and vegetarian dishes every week.",position:{lat:59.337522,lng:18.062079}},{restId:"3",name:"Raw Sushi & Grill",menu_link:"http://raw.se/lunch/",cuisine:"Japanese",price_range:"$$-$$$",rating:"***",phone:"08-309680",address:"Rörstrandsgatan 9",cat_id:"1",img_url:"img/raw.jpg",desc:"Japan meets Europe in an elegant restaurant focusing on the rawness. At Raw sushi and sashimi coexists with hot dishes from the grill, bothmeat and shellfish.",position:{lat:59.339795,lng:18.033839}},{restId:"4",name:"Hamburgarstugan",menu_link:"http://www.hamburgarstugan.se/wp-content/uploads/2016/04/Meny-Original-A4.pdf",cuisine:"Fast food",price_range:"$",rating:"***",phone:"08-216217",address:"Odengatan 53",cat_id:"2",img_url:"img/hStugan2.jpg",desc:"Come to Hamburgerstugan and get your life's best burger experience. They compile every burger with love daily. You get a day-to-day high-rise burger with home-made dressings and dip sauces. Gluten free bread is available.",position:{lat:59.343554,lng:18.054583}},{restId:"5",name:"Masala Masala",menu_link:"http://www.masalamasala.se/lunchmeny/",cuisine:"Indian",price_range:"$$",rating:"**",phone:"08-12147043",address:"Odengatan 60",cat_id:"2",img_url:"img/masala.jpg",desc:"Masala Masala – Genuine Indian cuisine, also inspired by its neighboring countries. Our innovative chef has specially composed a number of new vegan dishes.",position:{lat:59.34348,lng:18.052472}},{restId:"6",name:"Babel Deli",menu_link:"http://babeldeli.com/wp-content/uploads/2016/02/takeawaywebb2.pdf",cuisine:"Meze",price_range:"$$",rating:"***",phone:"08-6683903",address:"Kungstensgatan 33",cat_id:"2",img_url:"img/meze.jpg",desc:"Babel is today both on Kungstensgatan at Sveavägen and on Långholmsgatan at Hornstull. Welcome to a fantastic dining experience guaranteed by Mamma Etimad!",position:{lat:59.341657,lng:18.059082}},{restId:"7",name:"Arirang",menu_link:"http://arirang.se/lunch/",cuisine:"Korean",price_range:"$$",rating:"***",phone:"08-6733225",address:"Luntmakargatan 65",cat_id:"2",img_url:"img/korean.jpg",desc:"Mild or spicy. Gentle and sweet or tantalisingly hot. Anything is possible at Arirang. You can choose how to combine our dishes yourself or you can ask us for advice.",position:{lat:59.340634,lng:18.060196}}]},pnOm:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("U7vG"),i=n.n(s),c=n("3zLD"),l=(n.n(c),n("VH3W")),u=n("1K4x"),p=n("/DF0"),m=n("LGxg"),h=n("2Fet"),f=(n("KluA"),n("cilB")),d=(n.n(f),function(e,t){return e.raw=t,e}(["\nquery {\n\tallRestaurantses {\n\t\tid\n\t\tname\n\t\tcategoryId { id }\n\t\tphoneNumber\n\t\taddress\n\t\tmenuLink\n\t\tcuisine\n\t\trating\n\t\tpriceRange\n\t\trestImage { url }\n\t\tdesc\n\t\tposition\n\t}\n}\n"],["\nquery {\n\tallRestaurantses {\n\t\tid\n\t\tname\n\t\tcategoryId { id }\n\t\tphoneNumber\n\t\taddress\n\t\tmenuLink\n\t\tcuisine\n\t\trating\n\t\tpriceRange\n\t\trestImage { url }\n\t\tdesc\n\t\tposition\n\t}\n}\n"])),g=i.a.createElement(u.a,null),y=function(e){function t(n){a(this,t);var o=r(this,e.call(this,n));return o.state={step:1,selectedCategory:null,restaurantsList:[],selectedRestaurant:null,currentPos:null,isLocationBased:!1},o.onRestaurantSelected=o.onRestaurantSelected.bind(o),o.choosenCat=o.choosenCat.bind(o),o.showInfo=o.showInfo.bind(o),o.backToStart=o.backToStart.bind(o),o.getCurrentPos=o.getCurrentPos.bind(o),o.onCurrentPos=o.onCurrentPos.bind(o),o}return o(t,e),t.prototype.choosenCat=function(e){this.setState({step:2,selectedCategory:e,restaurantsList:this.props.data.allRestaurantses})},t.prototype.backToStart=function(){this.setState({step:1,isLocationBased:!1})},t.prototype.showInfo=function(){this.setState({step:3})},t.prototype.onRestaurantSelected=function(e){this.setState({selectedRestaurant:e})},t.prototype.onCurrentPos=function(e){this.setState({currentPos:{lat:e.coords.latitude,lng:e.coords.longitude}})},t.prototype.getCurrentPos=function(e){this.setState({isLocationBased:!0}),e.target.checked&&navigator.geolocation?navigator.geolocation.getCurrentPosition(this.onCurrentPos,function(){}):this.setState({currentPos:null,isLocationBased:!1})},t.prototype.filterRestaurants=function(e){var t=this;return e.filter(function(e){return e.categoryId.some(function(e){return e.id===t.state.selectedCategory})}).filter(function(e){if(t.state.currentPos){var n=new google.maps.LatLng({lat:e.position.lat,lng:e.position.lng}),a=new google.maps.LatLng({lat:t.state.currentPos.lat,lng:t.state.currentPos.lng}),r=google.maps.geometry.spherical.computeDistanceBetween(n,a);if(r>500)return!1;console.log(e.name,r)}return!0})},t.prototype.renderSteps=function(){return 1===this.state.step?i.a.createElement(p.a,{choosenCat:this.choosenCat,getCurrentPos:this.getCurrentPos}):2===this.state.step?i.a.createElement(m.a,{restaurantList:this.filterRestaurants(this.state.restaurantsList),onRestaurantSelected:this.onRestaurantSelected,showInfo:this.showInfo,currentPos:this.state.currentPos,backToStart:this.backToStart,isLocationBased:this.state.isLocationBased}):3===this.state.step?i.a.createElement(h.a,{selectedRestaurant:this.state.selectedRestaurant,backToStart:this.backToStart,currentPos:this.state.currentPos}):void 0},t.prototype.render=function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement(l.a,{backToStart:this.backToStart}),i.a.createElement("main",null,this.renderSteps()),g)},t}(s.Component);t.a=Object(c.graphql)(Object(c.gql)(d))(y)}},[0]);
//# sourceMappingURL=app.9e6b8a4d.js.map