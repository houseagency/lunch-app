webpackJsonp([1],{"/DF0":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("U7vG"),s=n.n(i),c=n("3zLD"),l=(n.n(c),n("pAMG")),u=(n.n(l),n("INDk")),p=(n.n(u),n("KluA")),h=n("0SSo"),d=function(e,t){return e.raw=t,e}(["\nquery {\n\tallCategorieses {\n\t\tid\n        catName\n        iconImg {\n            url\n        }\n\t}\n}\n"],["\nquery {\n\tallCategorieses {\n\t\tid\n        catName\n        iconImg {\n            url\n        }\n\t}\n}\n"]),m=s.a.createElement("div",{className:"loading-container"},s.a.createElement("div",{className:"loading-icon"}),s.a.createElement("p",null,"Loading position...")),f=function(e){function t(){return a(this,t),o(this,e.apply(this,arguments))}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.choosenCat,a=t.data,o=(this.props.getCurrentPos,this.props.handlePosToggle),r=(this.props.isLoadingPos,this.props.isLocationBased),i=(this.props.disabled,a.allCategorieses);return!!i&&s.a.createElement("div",{className:"btn-container"},s.a.createElement(h.a,{onClick:o,isLocationBased:r}),this.props.isLoading&&m,i.map(function(t,a){return s.a.createElement(p.a,{key:a,btnTxt:t.catName,onClick:function(){return n(t.id)},catBtn:"cat-btn",btnIcon:t.iconImg.url,disabled:e.props.isLoading})}))},t}(i.Component);t.a=Object(c.graphql)(Object(c.gql)(d))(f)},0:function(e,t,n){n("+prg"),e.exports=n("lVK7")},"0SSo":function(e,t,n){"use strict";var a=n("U7vG"),o=n.n(a),r=o.a.createElement("span",{className:"slider"}),i=o.a.createElement("h4",null,"Filter on nearby restaurants (within 500 m)"),s=function(e){return o.a.createElement("div",{className:"toggle-container"},o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onClick:function(t){e.onClick(t)},defaultChecked:!!e.isLocationBased}),r),i)};t.a=s},"1K4x":function(e,t,n){"use strict";var a=n("U7vG"),o=n.n(a),r=o.a.createElement("footer",null),i=function(e){return r};t.a=i},"2Fet":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("U7vG"),s=n.n(i),c=n("jdcc"),l=s.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),u=s.a.createElement("div",{className:"section-divider"},s.a.createElement("div",{className:"header-container"},s.a.createElement("h3",null,"DETAILS"))),p=s.a.createElement("div",{className:"section-divider"},s.a.createElement("div",{className:"header-container"},s.a.createElement("h3",null,"LOCATION"))),h=function(e){function t(){return a(this,t),o(this,e.apply(this,arguments))}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.selectedRestaurant,n=this.props.currentPos;t.rating;return s.a.createElement("div",{className:"info-container"},s.a.createElement("img",{className:"rest-img",src:t.restImage.url}),s.a.createElement("div",{className:"info"},s.a.createElement("h1",null,t.name),s.a.createElement("div",{className:"address-container"},l,s.a.createElement("p",null," ",t.address)),s.a.createElement("p",null,"Cuisine: ",t.cuisine," "),s.a.createElement("p",null,"Price range: ",t.priceRange),s.a.createElement("p",null,"Rating: ",t.rating)),u,s.a.createElement("div",{className:"info"},s.a.createElement("p",{className:"details"}," ",t.desc," "),s.a.createElement("a",{target:"_blank",href:t.menuLink},"To the lunch menu")),p,s.a.createElement(c.a,{position:t.position,currentPos:n,name:t.name,zoom:13,containerElement:s.a.createElement("div",{style:{height:300,width:"100%",marginTop:20}}),mapElement:s.a.createElement("div",{style:{height:"100%"}})}),s.a.createElement("a",{href:"#",ref:"link",onClick:function(){return e.props.backToStart()}},"BACK TO START"))},t}(i.Component);t.a=h},INDk:function(e,t){e.exports=[{name:"Formal Lunch",id:"1",imgIcon:"img/icon_formal.svg"},{name:"Work Lunch",id:"2",imgIcon:"img/icon_work.svg"}]},KluA:function(e,t,n){"use strict";var a=n("U7vG"),o=n.n(a),r=function(e){var t=e.catBtn,n=e.onClick,a=e.btnIcon,r=e.btnTxt,i=e.disabled;return o.a.createElement("button",{className:t,style:{opacity:i?.2:1},onClick:n,disabled:i},o.a.createElement("img",{className:"btn-icon",src:a}),o.a.createElement("span",null,r))};t.a=r},LGxg:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("U7vG"),s=n.n(i),c=(n("KluA"),n("+caA")),l=(n.n(c),n("3zLD")),u=(n.n(l),function(e){function t(n){a(this,t);var r=o(this,e.call(this,n));return r.slotHeight=99,r.fetchLink=function(){r.isSpinning=!1,document.querySelector(".info-link").style.display="block"},r.spin=r.spin.bind(r),r.moveSpinnerOneStep=r.moveSpinnerOneStep.bind(r),r.stopSpinner=r.stopSpinner.bind(r),r.fetchLink=r.fetchLink.bind(r),r.isSpinning=!1,r}return r(t,e),t.prototype.spin=function(){this.isSpinning=!0;var e=this.props.restaurantList,t=Math.floor(Math.random()*e.length);this.selectedRestaurant=e[t],this.moveSpinnerOneStep(1,0===t?e.length:t,6),console.log("Randomizer.spin",t)},t.prototype.moveSpinnerOneStep=function(e,t,n){var a=this;c.TweenMax.killTweensOf(this.refs.slots),e===this.props.restaurantList.length+1&&(e=1,c.TweenMax.set(this.refs.slots,{y:0}),n--),n<=0&&e===t?this.stopSpinner(e):this.refs.slots&&c.TweenMax.to(this.refs.slots,.1,{y:-e*this.slotHeight,ease:Linear.easeNone,onComplete:function(){a.moveSpinnerOneStep(e+1,t,n)}})},t.prototype.stopSpinner=function(e){var t=this;this.props.onRestaurantSelected(this.selectedRestaurant),c.TweenMax.to(this.refs.slots,2.5,{y:-e*this.slotHeight,ease:Bounce.easeOut,onComplete:function(){t.fetchLink()}})},t.prototype.componentDidMount=function(){this.spin()},t.prototype.componentWillUnmount=function(){c.TweenMax.killTweensOf(this.refs.slots)},t.prototype.render=function(){var e=this,t=this.props,n=t.restaurantList;t.data,t.currentPos;console.log("restList",n);var a=[].concat(n,[n[0]]).map(function(e,t){return s.a.createElement("div",{key:t,className:"restaurant-container"},s.a.createElement("p",{className:"spinner-txt"},e.name))});return s.a.createElement("div",{className:"randomizer-container"},s.a.createElement("div",{className:"slot-machine"},s.a.createElement("div",{ref:"slots",className:"slot-container"},a)),s.a.createElement("a",{className:"info-link",href:"#",ref:"link",onClick:function(){return e.props.showInfo()}},"MORE INFO"),s.a.createElement("a",{href:"#",ref:"link",onClick:function(){return e.props.backToStart()}},"BACK TO START"))},t}(i.Component));t.a=u},VH3W:function(e,t,n){"use strict";var a=n("U7vG"),o=n.n(a),r=(n("CIox"),n("F8kA"),n("/DF0"),n("LGxg"),n("2Fet"),o.a.createElement("header",null,o.a.createElement("div",{className:"logo-container"}))),i=function(e){return r};t.a=i},aLQP:function(e,t,n){e.exports=n.p+"MarkerIcon.756a8c50.svg"},cilB:function(e,t){},jdcc:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("U7vG"),s=n.n(i),c=n("BL0p"),l=(n.n(c),n("aLQP")),u=n.n(l),p=function(e){function t(){a(this,t);var n=o(this,e.call(this));return n.state={map:null,markers:[]},n}return r(t,e),t.prototype.mapLoaded=function(e){null==this.state.map&&this.setState({map:e})},t.prototype.render=function(){return s.a.createElement(c.GoogleMap,{ref:this.mapLoaded.bind(this),defaultZoom:this.props.zoom,defaultCenter:this.props.position},s.a.createElement(c.Marker,{name:"you are here",position:this.props.currentPos}),s.a.createElement(c.Marker,{className:"marker",name:this.props.name,position:this.props.position,icon:{url:u.a,scaledSize:new google.maps.Size(50,70)}}))},t}(i.Component);t.a=Object(c.withGoogleMap)(p)},lVK7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("U7vG"),o=n.n(a),r=n("O27J"),i=(n.n(r),n("3zLD")),s=(n.n(i),n("pnOm")),c=new i.ApolloClient({networkInterface:Object(i.createNetworkInterface)({uri:"https://api.graphcms.com/simple/v1/lunchapp"})});Object(r.render)(o.a.createElement(i.ApolloProvider,{client:c},o.a.createElement(s.a,null)),document.getElementById("app"))},pAMG:function(e,t){e.exports=[{restId:"1",name:"Restaurang Tranan",menu_link:"http://www.tranan.se/restaurangen/meny/",cuisine:["European","Swedish"],price_range:"$$-$$$",rating:"****",phone:"08-52728100",address:"Karlbergsvägen 14",cat_id:"1",img_url:"img/tranan.jpg",desc:"A place to meet at, have a bite to eat and something to drink. That was how Tranan was know in 1929 by the residents of Stockholm, and that’s how it’s still known today - over 80 years later.",position:{lat:59.343172,lng:18.049017}},{restId:"2",name:"Miss Clara",menu_link:"http://www.missclarahotel.com/restaurang/lunch-meny",cuisine:["International","Swedish"],price_range:"$$$",rating:"****",phone:"08-4406710",address:"Sveavägen 48",cat_id:"1",img_url:"img/fish_miss_clara.jpg",desc:"The kitchen’s philosophy is to work in as natural way as possible. They change our meat, fish and vegetarian dishes every week.",position:{lat:59.337522,lng:18.062079}},{restId:"3",name:"Raw Sushi & Grill",menu_link:"http://raw.se/lunch/",cuisine:"Japanese",price_range:"$$-$$$",rating:"***",phone:"08-309680",address:"Rörstrandsgatan 9",cat_id:"1",img_url:"img/raw.jpg",desc:"Japan meets Europe in an elegant restaurant focusing on the rawness. At Raw sushi and sashimi coexists with hot dishes from the grill, bothmeat and shellfish.",position:{lat:59.339795,lng:18.033839}},{restId:"4",name:"Hamburgarstugan",menu_link:"http://www.hamburgarstugan.se/wp-content/uploads/2016/04/Meny-Original-A4.pdf",cuisine:"Fast food",price_range:"$",rating:"***",phone:"08-216217",address:"Odengatan 53",cat_id:"2",img_url:"img/hStugan2.jpg",desc:"Come to Hamburgerstugan and get your life's best burger experience. They compile every burger with love daily. You get a day-to-day high-rise burger with home-made dressings and dip sauces. Gluten free bread is available.",position:{lat:59.343554,lng:18.054583}},{restId:"5",name:"Masala Masala",menu_link:"http://www.masalamasala.se/lunchmeny/",cuisine:"Indian",price_range:"$$",rating:"**",phone:"08-12147043",address:"Odengatan 60",cat_id:"2",img_url:"img/masala.jpg",desc:"Masala Masala – Genuine Indian cuisine, also inspired by its neighboring countries. Our innovative chef has specially composed a number of new vegan dishes.",position:{lat:59.34348,lng:18.052472}},{restId:"6",name:"Babel Deli",menu_link:"http://babeldeli.com/wp-content/uploads/2016/02/takeawaywebb2.pdf",cuisine:"Meze",price_range:"$$",rating:"***",phone:"08-6683903",address:"Kungstensgatan 33",cat_id:"2",img_url:"img/meze.jpg",desc:"Babel is today both on Kungstensgatan at Sveavägen and on Långholmsgatan at Hornstull. Welcome to a fantastic dining experience guaranteed by Mamma Etimad!",position:{lat:59.341657,lng:18.059082}},{restId:"7",name:"Arirang",menu_link:"http://arirang.se/lunch/",cuisine:"Korean",price_range:"$$",rating:"***",phone:"08-6733225",address:"Luntmakargatan 65",cat_id:"2",img_url:"img/korean.jpg",desc:"Mild or spicy. Gentle and sweet or tantalisingly hot. Anything is possible at Arirang. You can choose how to combine our dishes yourself or you can ask us for advice.",position:{lat:59.340634,lng:18.060196}}]},pnOm:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("U7vG"),s=n.n(i),c=n("3zLD"),l=(n.n(c),n("VH3W")),u=n("1K4x"),p=n("/DF0"),h=n("LGxg"),d=n("2Fet"),m=(n("KluA"),n("cilB")),f=(n.n(m),function(e,t){return e.raw=t,e}(["\nquery {\n\tallRestaurantses {\n\t\tid\n\t\tname\n\t\tcategoryId { id }\n\t\tphoneNumber\n\t\taddress\n\t\tmenuLink\n\t\tcuisine\n\t\trating\n\t\tpriceRange\n\t\trestImage { url }\n\t\tdesc\n\t\tposition\n\t}\n}\n"],["\nquery {\n\tallRestaurantses {\n\t\tid\n\t\tname\n\t\tcategoryId { id }\n\t\tphoneNumber\n\t\taddress\n\t\tmenuLink\n\t\tcuisine\n\t\trating\n\t\tpriceRange\n\t\trestImage { url }\n\t\tdesc\n\t\tposition\n\t}\n}\n"])),g=s.a.createElement(u.a,null),b=function(e){function t(n){a(this,t);var r=o(this,e.call(this,n));return r.state={step:1,selectedCategory:null,restaurantsList:[],selectedRestaurant:null,currentPos:null,currentPosTimeStamp:null,isLocationBased:!1,isFiltering:!1,isLoading:!1,disabled:!1},r.onRestaurantSelected=r.onRestaurantSelected.bind(r),r.choosenCat=r.choosenCat.bind(r),r.showInfo=r.showInfo.bind(r),r.backToStart=r.backToStart.bind(r),r.getCurrentPos=r.getCurrentPos.bind(r),r.onCurrentPos=r.onCurrentPos.bind(r),r.filterOnCat=r.filterOnCat.bind(r),r.shouldPosBeUpdated=r.shouldPosBeUpdated.bind(r),r.filterOnLocation=r.filterOnLocation.bind(r),r.handlePosToggle=r.handlePosToggle.bind(r),r}return r(t,e),t.prototype.choosenCat=function(e){var t=this;this.setState({isFiltering:!0}),this.state.isLocationBased?this.filterOnCat(this.props.data.allRestaurantses,e).then(function(n){t.filterOnLocation(n).then(function(n){t.setState({step:2,selectedCategory:e,restaurantsList:n,isFiltering:!1,isLoading:!0}),t.shouldPosBeUpdated()})}):this.filterOnCat(this.props.data.allRestaurantses,e).then(function(n){t.setState({step:2,selectedCategory:e,restaurantsList:n,isFiltering:!1})})},t.prototype.backToStart=function(){this.setState({step:1,isLoading:!1})},t.prototype.showInfo=function(){this.setState({step:3})},t.prototype.onRestaurantSelected=function(e){this.setState({selectedRestaurant:e})},t.prototype.handlePosToggle=function(e){this.setState({isLocationBased:!0}),e.target.checked?(this.setState({isLoading:!0}),this.getCurrentPos()):this.setState({currentPos:null,isLocationBased:!1})},t.prototype.shouldPosBeUpdated=function(){var e=new Date;Math.floor((e-this.state.currentPosTimeStamp)/6e4)>=1?(this.getCurrentPos(),console.log("uppdaterar")):console.log("behåller gamla positionen")},t.prototype.getCurrentPos=function(){this.setState({isLocationBased:!0}),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.onCurrentPos,function(){}):this.setState({currentPos:null,isLocationBased:!1})},t.prototype.onCurrentPos=function(e){var t=new Date;this.setState({currentPos:{lat:e.coords.latitude,lng:e.coords.longitude},currentPosTimeStamp:t,isLoading:!1}),console.log("current time stamp"+this.state.currentPosTimeStamp)},t.prototype.filterOnCat=function(e,t){return new Promise(function(n,a){n(e.filter(function(e){return e.categoryId.some(function(e){return e.id===t})}))})},t.prototype.filterOnLocation=function(e){var t=this;return new Promise(function(n,a){n(e.filter(function(e){var n=new google.maps.LatLng({lat:e.position.lat,lng:e.position.lng}),a=new google.maps.LatLng({lat:t.state.currentPos.lat,lng:t.state.currentPos.lng}),o=google.maps.geometry.spherical.computeDistanceBetween(n,a);if(o<500)return e;console.log(e.name,o)}))})},t.prototype.renderSteps=function(){return 1===this.state.step?s.a.createElement(p.a,{choosenCat:this.choosenCat,isLocationBased:this.state.isLocationBased,handlePosToggle:this.handlePosToggle,isLoading:this.state.isLoading,disabled:this.state.disabled}):2===this.state.step?s.a.createElement(h.a,{restaurantList:this.state.restaurantsList,onRestaurantSelected:this.onRestaurantSelected,showInfo:this.showInfo,currentPos:this.state.currentPos,backToStart:this.backToStart}):3===this.state.step?s.a.createElement(d.a,{selectedRestaurant:this.state.selectedRestaurant,backToStart:this.backToStart,currentPos:this.state.currentPos}):void 0},t.prototype.render=function(){return s.a.createElement("div",{className:"wrapper"},s.a.createElement(l.a,{backToStart:this.backToStart}),s.a.createElement("main",null,this.renderSteps()),g)},t}(i.Component);t.a=Object(c.graphql)(Object(c.gql)(f))(b)}},[0]);
//# sourceMappingURL=app.f4fa2c1e.js.map